
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Getting started writing Chef cookbooks the Berkshelf Way - Mischa Taylor's Coding Blog</title>
  <meta name="author" content="Mischa Taylor">

  
  <meta name="description" content="Jamie Winsor hasn&#8217;t yet updated his guide to authoring cookbooks the Berkshelf way
to match recent changes related to Vagrant 1.1 and Chef 11 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://misheska.com/blog/2013/03/24/getting-started-writing-chef-cookbooks-the-berkshelf-way/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Mischa Taylor's Coding Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-38545837-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Mischa Taylor's Coding Blog</a></h1>
  
    <h2>On the edge of time and reason</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:misheska.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Getting Started Writing Chef Cookbooks the Berkshelf Way</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-24T09:27:00-07:00" pubdate data-updated="true">Mar 24<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Jamie Winsor hasn&#8217;t yet updated his <a href="http://vialstudios.com/guide-authoring-cookbooks.html">guide to authoring cookbooks the Berkshelf way</a>
to match <a href="https://github.com/RiotGames/berkshelf/issues/416">recent changes related to Vagrant 1.1</a> and <a href="http://www.opscode.com/blog/2013/03/11/chef-11-server-up-and-running/">Chef 11</a>
This post is an attempt to update these instructions, walking through his
and Sean O&#8217;Meara&#8217;s example app - <a href="https://github.com/reset/myface-cookbook">MyFace</a>.
For more information on <a href="http://berkshelf.com/">Berkshelf</a>, check out his recent
<a href="https://my.adobeconnect.com/_a295153/p59b87of2dp/?launcher=false&amp;fcsContent=true&amp;pbMode=normal">talk</a>
and <a href="http://www.slideshare.net/resetexistence/the-berkshelf-way">slides</a>
from the March 14, 2013 Bay Area Chef meetup.</p>

<h1>Getting Started</h1>

<ul>
<li><p>Install Ruby 1.9.x via <a href="http://misheska.com/blog/2013/02/24/using-rbenv-to-manage-multiple-versions-of-ruby/">rvm</a> or <a href="http://misheska.com/blog/2013/02/24/using-rbenv-to-manage-multiple-versions-of-ruby/">rbenv</a></p></li>
<li><p><a href="http://virtualbox.org">Install VirtualBox 4.2.x (or higher)</a></p></li>
<li><p><a href="http://vagrantup.com">Install Vagrant 1.1.x</a></p></li>
<li><p>Install the Berkshelf Vagrant Plugin (1.0.3 or higher)</p></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ vagrant plugin install berkshelf-vagrant
</span><span class='line'>Installing the 'berkshelf-vagrant' plugin. This can take a few minutes...
</span><span class='line'>Installed the plugin 'berkshelf-vagrant (1.0.6)'!</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Install Berkshelf</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ gem install berkshelf</span></code></pre></td></tr></table></div></figure>


<h1>Create the MyFace Application Cookbook</h1>

<p>Key to the Berkshelf way is the use of the Application Cookbook Pattern.  An
application cookbook contains the list of recipes needed to build your
application or service.  As an example, this blog post will walk you through
the creation of an example service - MyFace - the next killer social web app.</p>

<p>First create a new cookbook for the MyFace application using the
<code>berks cookbook</code> command:</p>

<pre><code>$ berks cookbook myface
      create  myface/files/default
      create  myface/templates/default
      create  myface/attributes
      create  myface/definitions
      create  myface/libraries
      create  myface/providers
      create  myface/recipes
      create  myface/resources
      create  myface/recipes/default.rb
      create  myface/metadata.rb
      create  myface/LICENSE
      create  myface/README.md
      create  myface/Berksfile
      create  myface/chefignore
      create  myface/.gitignore
         run  git init from "./myface"
      create  myface/Gemfile
      create  myface/Vagrantfile
Using myface (0.1.0) at path: '/Users/misheska/myface'
</code></pre>

<p>Run <code>bundle install</code> in the newly created cookbook directory to install the
necessary Gem dependencies:</p>

<pre><code>$ cd myface
$ bundle install
</code></pre>

<h1>Prepare a virtual machine for testing</h1>

<p>It&#8217;s a good idea to develop your cookbook incrementally, testing
in short iterations.  Berkshelf integrates with Vagrant to deploy
your cookbook changes to a virtual machine for testing.</p>

<p>Edit the Vagrantfile generated by the <code>berks cookbook</code> command to use
a VirtualBox template that has Chef 11 installed.  (By default Berkshelf points
at an image with Chef 10).  Your Vagrantfile should look like this:</p>

<figure class='code'><figcaption><span>myface/Vagrantfile  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s2">&quot;2&quot;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">hostname</span> <span class="o">=</span> <span class="s2">&quot;myface-berkshelf&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&quot;opcode_centos-6.3_chef-11.2.0&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_url</span> <span class="o">=</span> <span class="s2">&quot;https://opscode-vm.s3.amazonaws.com/vagrant/opscode_centos-6.3_chef-11.2.0.box&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="ss">:private_network</span><span class="p">,</span> <span class="ss">ip</span><span class="p">:</span> <span class="s2">&quot;33.33.33.10&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">max_tries</span> <span class="o">=</span> <span class="mi">40</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="mi">120</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="ss">:chef_solo</span> <span class="k">do</span> <span class="o">|</span><span class="n">chef</span><span class="o">|</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">json</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>      <span class="ss">:mysql</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>        <span class="ss">:server_root_password</span> <span class="o">=&gt;</span> <span class="s1">&#39;rootpass&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="ss">:server_debian_password</span> <span class="o">=&gt;</span> <span class="s1">&#39;debpass&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="ss">:server_repl_password</span> <span class="o">=&gt;</span> <span class="s1">&#39;replpass&#39;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">run_list</span> <span class="o">=</span> <span class="o">[</span>
</span><span class='line'>      <span class="s2">&quot;recipe[myface::defult]&quot;</span>
</span><span class='line'>    <span class="o">]</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Run <code>vagrant up</code> to start up the virtual machine and to test the stub MyFace
cookbook you just created:</p>

<pre><code>$ vagrant up
Bringing machine 'default' up with 'virtualbox' provider...
[default] Box 'opscode_centos-6.3_chef-11.2.0' was not found. Fetching box from specified URL for
the provider 'virtualbox'. Note that if the URL does not have
a box for this provider, you should interrupt Vagrant now and add
the box yourself. Otherwise Vagrant will attempt to download the
full box prior to discovering this error.
Downloading with Vagrant::Downloaders::HTTP...
Downloading box: https://opscode-vm.s3.amazonaws.com/vagrant/opscode_centos-6.3_chef-11.2.0.box
Extracting box...
Cleaning up downloaded box...
Successfully added box 'opscode_centos-6.3_chef-11.2.0' with provider 'virtualbox'!
[default] Importing base box 'opscode_centos-6.3_chef-11.2.0'...
[default] Matching MAC address for NAT networking...
[default] Setting the name of the VM...
[default] Clearing any previously set forwarded ports...
[Berkshelf] Updating Vagrant's berkshelf: '/Users/misheska/.berkshelf/vagrant/berkshelf-20130324-17246-9dysyo'
[Berkshelf] Using myface (0.1.0) at path: '/Users/misheska/git/myface'
[default] Creating shared folders metadata...
[default] Clearing any previously set network interfaces...
[default] Preparing network interfaces based on configuration...
[default] Forwarding ports...
[default] -- 22 =&gt; 2222 (adapter 1)
[default] Booting VM...
[default] Waiting for VM to boot. This can take a few minutes.
[default] VM booted and ready for use!
[default] Setting hostname...
[default] Configuring and enabling network interfaces...
[default] Mounting shared folders...
[default] -- /vagrant
[default] -- /tmp/vagrant-chef-1/chef-solo-1/cookbooks
[default] Running provisioner: VagrantPlugins::Chef::Provisioner::ChefSolo...
Generating chef JSON and uploading...
Running chef-solo...
[2013-03-24T21:21:56+00:00] INFO: *** Chef 11.2.0 ***
[2013-03-24T21:21:57+00:00] INFO: Setting the run_list to ["recipe[myface::default]"] from JSON
[2013-03-24T21:21:57+00:00] INFO: Run List is [recipe[myface::default]]
[2013-03-24T21:21:57+00:00] INFO: Run List expands to [myface::default]
[2013-03-24T21:21:57+00:00] INFO: Starting Chef Run for myface-berkshelf
[2013-03-24T21:21:57+00:00] INFO: Running start handlers
[2013-03-24T21:21:57+00:00] INFO: Start handlers complete.
[2013-03-24T21:21:57+00:00] INFO: Chef Run complete in 0.0256688 seconds
[2013-03-24T21:21:57+00:00] INFO: Running report handlers
[2013-03-24T21:21:57+00:00] INFO: Report handlers complete
</code></pre>

<p>If all goes well, you should see <code>Chef Run complete</code> with no errors.</p>

<p>If you would ever like to delete your test virtual machine and start over,
you can destroy your test virtual machine with the <code>vagrant destroy</code> command:</p>

<pre><code>$ vagrant destroy
Are you sure you want to destroy the 'default' VM? [y/N] y
[default] Forcing shutdown of VM...
[default] Destroying VM and associated drives...
[Berkshelf] Cleaning Vagrant's berkshelf
</code></pre>

<p>Run <code>vagrant up</code> to recreate the test virtual machine.</p>

<p><strong>NOTE:</strong> If you just ran <code>vagrant destroy</code> make sure you run <code>vagrant up</code>
before proceeding to the next section.</p>

<h1>Iteration #1: Create an application user</h1>

<p>For our first short iteration, let&#8217;s create a <code>myface</code> user under which
we&#8217;ll run our application.  One best practice is to avoid running
applications as root and create a user/group under which the application runs
instead who has just enough rights that the app needs.</p>

<p>Edit <code>myface/recipes/default.rb</code> defining a new <a href="http://docs.opscode.com/resource_group.html">Group Resource</a>
and <a href="http://docs.opscode.com/resource_user.html">User Resource</a> for myface,
so it looks like the following:</p>

<figure class='code'><figcaption><span>myface/recipes/default.rb  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Cookbook Name:: myface</span>
</span><span class='line'><span class="c1"># Recipe:: default</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Copyright (C) 2013 YOUR_NAME</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># All rights reserved - Do Not Redistribute</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'>
</span><span class='line'><span class="n">group</span> <span class="s2">&quot;myface&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">user</span> <span class="s2">&quot;myface&quot;</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">group</span> <span class="s2">&quot;myface&quot;</span>
</span><span class='line'>  <span class="nb">system</span> <span class="kp">true</span>
</span><span class='line'>  <span class="n">shell</span> <span class="s2">&quot;/bin/bash&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Save <code>receipes/default.rb</code> and re-run <code>vagrant provision</code> to create the
myface user on your test virtual machine:</p>

<pre><code>$ vagrant provision
[Berkshelf] Updating Vagrant's berkshelf: '/Users/misheska/.berkshelf/vagrant/berkshelf-20130324-19145-nf292v'
[Berkshelf] Using myface (0.1.0) at path: '/Users/misheska/git/myface'
[default] Running provisioner: VagrantPlugins::Chef::Provisioner::ChefSolo...
Generating chef JSON and uploading...
Running chef-solo...
[2013-03-25T11:40:10+00:00] INFO: *** Chef 11.2.0 ***
[2013-03-25T11:40:10+00:00] INFO: Setting the run_list to ["recipe[myface::default]"] from JSON
[2013-03-25T11:40:10+00:00] INFO: Run List is [recipe[myface::default]]
[2013-03-25T11:40:10+00:00] INFO: Run List expands to [myface::default]
[2013-03-25T11:40:10+00:00] INFO: Starting Chef Run for myface-berkshelf
[2013-03-25T11:40:10+00:00] INFO: Running start handlers
[2013-03-25T11:40:10+00:00] INFO: Start handlers complete.
[2013-03-25T11:40:10+00:00] INFO: Processing group[myface] action create (myface::default line 10)
[2013-03-25T11:40:10+00:00] INFO: group[myface] created
[2013-03-25T11:40:10+00:00] INFO: Processing user[myface] action create (myface::default line 12)
[2013-03-25T11:40:10+00:00] INFO: user[myface] created
[2013-03-25T11:40:10+00:00] INFO: Chef Run complete in 0.085739737 seconds
[2013-03-25T11:40:10+00:00] INFO: Running report handlers
[2013-03-25T11:40:10+00:00] INFO: Report handlers complete
</code></pre>

<p>Again, you should expect to see the Chef run complete with no errors.  Notice
that it also creates <code>group[myface]</code> and <code>user[myface]</code>.</p>

<p>Verify that Chef actually created the myface user on our test virtual
machine by running the following:</p>

<pre><code>$ vagrant ssh -c "getent passwd myface"
myface:x:497:1001::/home/myface:/bin/bash
</code></pre>

<p>We use <code>vagrant ssh -c</code> to run a command on our test virtual machine.  The
<code>getent</code> command can be used to query all user databases.  In this
case we&#8217;re looking for <code>myface</code>, and it exists!</p>

<p>Because we are using well-defined resources that are completely
<a href="http://en.wikipedia.org/wiki/Idempotence">idempotent</a>, you should notice
that if you run <code>vagrant provision</code> again, the Chef run executes more quickly
and it does not try to re-create the user/group it already created.</p>

<pre><code>$ vagrant provision
[Berkshelf] Updating Vagrant's berkshelf: '/Users/misheska/.berkshelf/vagrant/berkshelf-20130324-19145-nf292v'
[Berkshelf] Using myface (0.1.0) at path: '/Users/misheska/git/myface'
[default] Running provisioner: VagrantPlugins::Chef::Provisioner::ChefSolo...
Generating chef JSON and uploading...
Running chef-solo...
[2013-03-25T11:50:03+00:00] INFO: *** Chef 11.2.0 ***
[2013-03-25T11:50:04+00:00] INFO: Setting the run_list to ["recipe[myface::default]"] from JSON
[2013-03-25T11:50:04+00:00] INFO: Run List is [recipe[myface::default]]
[2013-03-25T11:50:04+00:00] INFO: Run List expands to [myface::default]
[2013-03-25T11:50:04+00:00] INFO: Starting Chef Run for myface-berkshelf
[2013-03-25T11:50:04+00:00] INFO: Running start handlers
[2013-03-25T11:50:04+00:00] INFO: Start handlers complete.
[2013-03-25T11:50:04+00:00] INFO: Processing group[myface] action create (myface::default line 10)
[2013-03-25T11:50:04+00:00] INFO: Processing user[myface] action create (myface::default line 12)
[2013-03-25T11:50:04+00:00] INFO: Chef Run complete in 0.028070063 seconds
[2013-03-25T11:50:04+00:00] INFO: Running report handlers
[2013-03-25T11:50:04+00:00] INFO: Report handlers complete
</code></pre>

<h1>Iteration #2 - Refactor the user name and group name into attributes</h1>

<p>What if at some point you wanted to change the name of the <code>myface</code> user/group
you just created to something else?  At the moment, you would need to edit
<code>myface/recipes/default.rb</code> in three places.</p>

<p>Let&#8217;s create a new file called <code>myface/attributes/default.rb</code> which
initializes Chef <a href="http://docs.opscode.com/essentials_cookbook_attribute_files.html">attributes</a>
defining the user name and group name under which our application will run so
that you <a href="http://en.wikipedia.org/wiki/Don't_repeat_yourself">don&#8217;t repeat yoursef</a>.</p>

<figure class='code'><figcaption><span>myface/attributes/default.rb  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">default</span><span class="o">[</span><span class="ss">:myface</span><span class="o">][</span><span class="ss">:user</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;myface&quot;</span>
</span><span class='line'><span class="n">default</span><span class="o">[</span><span class="ss">:myface</span><span class="o">][</span><span class="ss">:group</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;myface&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>In Chef, attributes are a hash of a hash used to override the default settings
on a node.  The first hash is the cookbook name - in our
case we&#8217;ve named our cookbook <code>:myface</code>. The second hash is the name of
our attribute - in this case, we&#8217;re defining two new attributes: <code>:user</code> and
<code>:group</code>.</p>

<p><code>default</code> implies the use of the <a href="http://docs.opscode.com/chef/essentials_node_object.html">node object</a>
<code>node.default</code> and is a Chef attribute file shorthand.  The following are
equivalent definitions to the ones above:</p>

<pre><code>node.default[:myface][:user] = "myface"
noce.default[:myface][:user] = "myface"
</code></pre>

<p>Also note the use of symbols instead of strings.  It is <a href="http://www.robertsosinski.com/2009/01/11/the-difference-between-ruby-symbols-and-strings/">strongly recommended
that you use symbols instead of strings</a>
for hash indexes.</p>

<p>Now that you&#8217;ve created your attribute definitions, edit
<code>myface/recipes/default.rb</code> and replace all references to the &#8220;myface&#8221; user name
with <code>node[:myface][:user]</code> and all references to the &#8220;myface&#8221; group with
<code>node[:myface][:group]</code>.  <code>myface/recipes/default.rb</code> should now look like
this:</p>

<figure class='code'><figcaption><span>myface/attributes/default.rb  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Cookbook Name:: myface</span>
</span><span class='line'><span class="c1"># Recipe:: default</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Copyright (C) 2013 YOUR_NAME</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># All rights reserved - Do Not Redistribute</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'>
</span><span class='line'><span class="n">group</span> <span class="n">node</span><span class="o">[</span><span class="ss">:myface</span><span class="o">][</span><span class="ss">:group</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">user</span> <span class="n">node</span><span class="o">[</span><span class="ss">:myface</span><span class="o">][</span><span class="ss">:user</span><span class="o">]</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">group</span> <span class="n">node</span><span class="o">[</span><span class="ss">:myface</span><span class="o">][</span><span class="ss">:group</span><span class="o">]</span>
</span><span class='line'>  <span class="nb">system</span> <span class="kp">true</span>
</span><span class='line'>  <span class="n">shell</span> <span class="s2">&quot;/bin/bash&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Re-provision with <code>vagrant provision</code> to see how the refactor went:</p>

<pre><code>$ vagrant provision
[Berkshelf] Updating Vagrant's berkshelf: '/Users/misheska/.berkshelf/vagrant/berkshelf-20130325-20447-1lz0yjk'
[Berkshelf] Using myface (0.1.0) at path: '/Users/misheska/git/myface'
[default] Running provisioner: VagrantPlugins::Chef::Provisioner::ChefSolo...
Generating chef JSON and uploading...
Running chef-solo...
[2013-03-25T12:56:23+00:00] INFO: *** Chef 11.2.0 ***
[2013-03-25T12:56:23+00:00] INFO: Setting the run_list to ["recipe[myface::default]"] from JSON
[2013-03-25T12:56:23+00:00] INFO: Run List is [recipe[myface::default]]
[2013-03-25T12:56:23+00:00] INFO: Run List expands to [myface::default]
[2013-03-25T12:56:23+00:00] INFO: Starting Chef Run for myface-berkshelf
[2013-03-25T12:56:23+00:00] INFO: Running start handlers
[2013-03-25T12:56:23+00:00] INFO: Start handlers complete.
[2013-03-25T12:56:23+00:00] INFO: Processing group[myface] action create (myface::default line 10)
[2013-03-25T12:56:23+00:00] INFO: Processing user[myface] action create (myface::default line 12)
[2013-03-25T12:56:23+00:00] INFO: Chef Run complete in 0.031634516 seconds
[2013-03-25T12:56:23+00:00] INFO: Running report handlers
[2013-03-25T12:56:23+00:00] INFO: Report handlers complete
</code></pre>

<p>As long as you didn&#8217;t create any syntax errors in your refactoring file edits,
there should be no net change on the virtual machine test node (as you&#8217;ve only
just moved some strings into a node attribute).  Running  <code>getent</code> on the
test virtual machine should also produce the same result:</p>

<pre><code>$ vagrant ssh -c "getent passwd myface"
myface:x:497:1001::/home/myface:/bin/bash
</code></pre>

<h1>Iteration #3 - Install the Apache2 Web Server</h1>

<p>Our hot new social networking application, myface, is a web app, so we need
to install a web server.  Let&#8217;s install the Apache2 web server.</p>

<p>Modify <code>myface/recipes/default.rb</code> to include the apache2 cookbook&#8217;s default
recipe:</p>

<pre><code>include_recipe "apache2"
</code></pre>

<p>The resultant <code>myface/recipes/default.rb</code> file should look like so:</p>

<figure class='code'><figcaption><span>myface/recipes/default.rb  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Cookbook Name:: myface</span>
</span><span class='line'><span class="c1"># Recipe:: default</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Copyright (C) 2013 YOUR_NAME</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># All rights reserved - Do Not Redistribute</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'>
</span><span class='line'><span class="n">group</span> <span class="n">node</span><span class="o">[</span><span class="ss">:myface</span><span class="o">][</span><span class="ss">:group</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">user</span> <span class="n">node</span><span class="o">[</span><span class="ss">:myface</span><span class="o">][</span><span class="ss">:user</span><span class="o">]</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">group</span> <span class="n">node</span><span class="o">[</span><span class="ss">:myface</span><span class="o">][</span><span class="ss">:group</span><span class="o">]</span>
</span><span class='line'>  <span class="nb">system</span> <span class="kp">true</span>
</span><span class='line'>  <span class="n">shell</span> <span class="s2">&quot;/bin/bash&quot;</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;apache2&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Since you are loading Apache2 from another cookbook, you need to configure the
dependency in your metadata.  Edit <code>myface/metadata.rb</code> and add the <code>apache2</code>
dependency at the bottom:</p>

<pre><code>depends "apache2", "~&gt; 1.6.0"
</code></pre>

<p>This tells Chef that the myface cookbook depends on the apache2 cookbook.
We&#8217;ve also specified a version constraint using the optimistic operator
<code>~&gt;</code> to tell our Chef that we want the latest version of the apache2 cookbook
that is greater than 1.6.0 but <em>not</em> 1.7.0 or higher.</p>

<p>It is recommended that Chef cookbooks follow a
<a href="http://semver.org/">Semantic Versioning</a> scheme.  So if you write your
cookbook to use the latest apache2 1.6.x cookbook, if the apache2 cookbook is
ever bumped to a 1.7.x version (or 2.x), it has some public API functionality
that has at least been deprecated.  So you&#8217;ll want to review the changes and
test before automatically using an apache2 cookbook version 1.7.x or higher.
However, automatic use of any new 1.6.x is perfectly fine, because no
only backwards-compatible bug fixes has been introduced.  Semantic Versioning
guarantees there are no changes in the public APIs.</p>

<p>Your <code>myface/metadata.rb</code> should look like this:</p>

<figure class='code'><figcaption><span>myface/attributes/default.rb  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">name</span>             <span class="s2">&quot;myface&quot;</span>
</span><span class='line'><span class="n">maintainer</span>       <span class="s2">&quot;YOUR_NAME&quot;</span>
</span><span class='line'><span class="n">maintainer_email</span> <span class="s2">&quot;YOUR_EMAIL&quot;</span>
</span><span class='line'><span class="n">license</span>          <span class="s2">&quot;All rights reserved&quot;</span>
</span><span class='line'><span class="n">description</span>      <span class="s2">&quot;Installs/Configures myface&quot;</span>
</span><span class='line'><span class="n">long_description</span> <span class="no">IO</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">__FILE__</span><span class="p">),</span> <span class="s1">&#39;README.md&#39;</span><span class="p">))</span>
</span><span class='line'><span class="n">version</span>          <span class="s2">&quot;0.1.0&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">depends</span> <span class="s2">&quot;apache2&quot;</span><span class="p">,</span> <span class="s2">&quot;~&gt; 1.6.0&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now when you re-run <code>vagrant provision</code> it will install apache2 on your
test virtual machine:</p>

<pre><code>$ vagrant provision
[Berkshelf] Updating Vagrant's berkshelf: '/Users/misheska/.berkshelf/vagrant/berkshelf-20130326-30730-144pxxn'
[Berkshelf] Using myface (0.1.0) at path: '/Users/misheska/git/myface'
[Berkshelf] Installing apache2 (1.6.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'
[default] Running provisioner: VagrantPlugins::Chef::Provisioner::ChefSolo...
Generating chef JSON and uploading...
Running chef-solo...
[2013-03-27T06:29:43+00:00] INFO: *** Chef 11.2.0 ***
[2013-03-27T06:29:43+00:00] INFO: Setting the run_list to ["recipe[myface::default]"] from JSON
[2013-03-27T06:29:43+00:00] INFO: Run List is [recipe[myface::default]]
[2013-03-27T06:29:43+00:00] INFO: Run List expands to [myface::default]
[2013-03-27T06:29:43+00:00] INFO: Starting Chef Run for myface-berkshelf
[2013-03-27T06:29:43+00:00] INFO: Running start handlers
[2013-03-27T06:29:43+00:00] INFO: Start handlers complete.
[2013-03-27T06:29:44+00:00] WARN: Cloning resource attributes for service[apache2] from prior resource (CHEF-3694)
[2013-03-27T06:29:44+00:00] WARN: Previous service[apache2]: /tmp/vagrant-chef-1/chef-solo-1/cookbooks/apache2/recipes/default.rb:24:in `from_file'
[2013-03-27T06:29:44+00:00] WARN: Current  service[apache2]: /tmp/vagrant-chef-1/chef-solo-1/cookbooks/apache2/recipes/default.rb:221:in `from_file'
[2013-03-27T06:29:44+00:00] INFO: Processing group[myface] action create (myface::default line 10)
[2013-03-27T06:29:44+00:00] INFO: Processing user[myface] action create (myface::default line 12)
[2013-03-27T06:29:44+00:00] INFO: Processing package[apache2] action install (apache2::default line 20)
[2013-03-27T06:30:26+00:00] INFO: package[apache2] installing httpd-2.2.15-26.el6.centos from base repository
[2013-03-27T06:30:35+00:00] INFO: Processing service[apache2] action enable (apache2::default line 24)
[2013-03-27T06:30:35+00:00] INFO: service[apache2] enabled
[2013-03-27T06:30:35+00:00] INFO: Processing directory[/var/log/httpd] action create (apache2::default line 47)
[2013-03-27T06:30:35+00:00] INFO: directory[/var/log/httpd] mode changed to 755
[2013-03-27T06:30:35+00:00] INFO: Processing package[perl] action install (apache2::default line 51)
[2013-03-27T06:30:35+00:00] INFO: Processing cookbook_file[/usr/local/bin/apache2_module_conf_generate.pl] action create (apache2::default line 53)
[2013-03-27T06:30:36+00:00] INFO: cookbook_file[/usr/local/bin/apache2_module_conf_generate.pl] owner changed to 0
[2013-03-27T06:30:36+00:00] INFO: cookbook_file[/usr/local/bin/apache2_module_conf_generate.pl] group changed to 0
[2013-03-27T06:30:36+00:00] INFO: cookbook_file[/usr/local/bin/apache2_module_conf_generate.pl] mode changed to 755
[2013-03-27T06:30:36+00:00] INFO: cookbook_file[/usr/local/bin/apache2_module_conf_generate.pl] created file /usr/local/bin/apache2_module_conf_generate.pl
[2013-03-27T06:30:36+00:00] INFO: Processing directory[/etc/httpd/sites-available] action create (apache2::default line 61)
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/sites-available] created directory /etc/httpd/sites-available
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/sites-available] owner changed to 0
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/sites-available] group changed to 0
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/sites-available] mode changed to 755
[2013-03-27T06:30:36+00:00] INFO: Processing directory[/etc/httpd/sites-enabled] action create (apache2::default line 61)
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/sites-enabled] created directory /etc/httpd/sites-enabled
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/sites-enabled] owner changed to 0
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/sites-enabled] group changed to 0
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/sites-enabled] mode changed to 755
[2013-03-27T06:30:36+00:00] INFO: Processing directory[/etc/httpd/mods-available] action create (apache2::default line 61)
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/mods-available] created directory /etc/httpd/mods-available
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/mods-available] owner changed to 0
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/mods-available] group changed to 0
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/mods-available] mode changed to 755
[2013-03-27T06:30:36+00:00] INFO: Processing directory[/etc/httpd/mods-enabled] action create (apache2::default line 61)
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/mods-enabled] created directory /etc/httpd/mods-enabled
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/mods-enabled] owner changed to 0
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/mods-enabled] group changed to 0
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/mods-enabled] mode changed to 755
[2013-03-27T06:30:36+00:00] INFO: Processing execute[generate-module-list] action nothing (apache2::default line 68)
[2013-03-27T06:30:36+00:00] INFO: Processing template[/usr/sbin/a2ensite] action create (apache2::default line 74)
[2013-03-27T06:30:36+00:00] INFO: template[/usr/sbin/a2ensite] updated content
[2013-03-27T06:30:36+00:00] INFO: template[/usr/sbin/a2ensite] owner changed to 0
[2013-03-27T06:30:36+00:00] INFO: template[/usr/sbin/a2ensite] group changed to 0
[2013-03-27T06:30:36+00:00] INFO: template[/usr/sbin/a2ensite] mode changed to 700
[2013-03-27T06:30:36+00:00] INFO: Processing template[/usr/sbin/a2dissite] action create (apache2::default line 74)
[2013-03-27T06:30:36+00:00] INFO: template[/usr/sbin/a2dissite] updated content
[2013-03-27T06:30:36+00:00] INFO: template[/usr/sbin/a2dissite] owner changed to 0
[2013-03-27T06:30:36+00:00] INFO: template[/usr/sbin/a2dissite] group changed to 0
[2013-03-27T06:30:36+00:00] INFO: template[/usr/sbin/a2dissite] mode changed to 700
[2013-03-27T06:30:36+00:00] INFO: Processing template[/usr/sbin/a2enmod] action create (apache2::default line 74)
[2013-03-27T06:30:36+00:00] INFO: template[/usr/sbin/a2enmod] updated content
[2013-03-27T06:30:36+00:00] INFO: template[/usr/sbin/a2enmod] owner changed to 0
[2013-03-27T06:30:36+00:00] INFO: template[/usr/sbin/a2enmod] group changed to 0
[2013-03-27T06:30:36+00:00] INFO: template[/usr/sbin/a2enmod] mode changed to 700
[2013-03-27T06:30:36+00:00] INFO: Processing template[/usr/sbin/a2dismod] action create (apache2::default line 74)
[2013-03-27T06:30:36+00:00] INFO: template[/usr/sbin/a2dismod] updated content
[2013-03-27T06:30:36+00:00] INFO: template[/usr/sbin/a2dismod] owner changed to 0
[2013-03-27T06:30:36+00:00] INFO: template[/usr/sbin/a2dismod] group changed to 0
[2013-03-27T06:30:36+00:00] INFO: template[/usr/sbin/a2dismod] mode changed to 700
[2013-03-27T06:30:36+00:00] INFO: Processing file[/etc/httpd/conf.d/proxy_ajp.conf] action delete (apache2::default line 84)
[2013-03-27T06:30:36+00:00] INFO: Processing file[/etc/httpd/conf.d/auth_pam.conf] action delete (apache2::default line 84)
[2013-03-27T06:30:36+00:00] INFO: Processing file[/etc/httpd/conf.d/authz_ldap.conf] action delete (apache2::default line 84)
[2013-03-27T06:30:36+00:00] INFO: Processing file[/etc/httpd/conf.d/webalizer.conf] action delete (apache2::default line 84)
[2013-03-27T06:30:36+00:00] INFO: Processing file[/etc/httpd/conf.d/ssl.conf] action delete (apache2::default line 84)
[2013-03-27T06:30:36+00:00] INFO: Processing file[/etc/httpd/conf.d/welcome.conf] action delete (apache2::default line 84)
[2013-03-27T06:30:36+00:00] INFO: file[/etc/httpd/conf.d/welcome.conf] deleted file at /etc/httpd/conf.d/welcome.conf
[2013-03-27T06:30:36+00:00] INFO: Processing file[/etc/httpd/conf.d/README] action delete (apache2::default line 91)
[2013-03-27T06:30:36+00:00] INFO: file[/etc/httpd/conf.d/README] deleted file at /etc/httpd/conf.d/README
[2013-03-27T06:30:36+00:00] INFO: Processing template[/etc/httpd/mods-available/deflate.conf] action create (apache2::mod_deflate line 21)
[2013-03-27T06:30:36+00:00] INFO: template[/etc/httpd/mods-available/deflate.conf] updated content
[2013-03-27T06:30:36+00:00] INFO: template[/etc/httpd/mods-available/deflate.conf] mode changed to 644
[2013-03-27T06:30:36+00:00] INFO: Processing file[/etc/httpd/mods-available/deflate.load] action create (apache2::mod_deflate line 31)
[2013-03-27T06:30:36+00:00] INFO: entered create
[2013-03-27T06:30:36+00:00] INFO: file[/etc/httpd/mods-available/deflate.load] mode changed to 644
[2013-03-27T06:30:36+00:00] INFO: file[/etc/httpd/mods-available/deflate.load] created file /etc/httpd/mods-available/deflate.load
[2013-03-27T06:30:36+00:00] INFO: Processing execute[a2enmod deflate] action run (apache2::mod_deflate line 38)
[2013-03-27T06:30:36+00:00] INFO: execute[a2enmod deflate] ran successfully
[2013-03-27T06:30:36+00:00] INFO: Processing directory[/etc/httpd/ssl] action create (apache2::default line 131)
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/ssl] created directory /etc/httpd/ssl
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/ssl] owner changed to 0
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/ssl] group changed to 0
[2013-03-27T06:30:36+00:00] INFO: directory[/etc/httpd/ssl] mode changed to 755
[2013-03-27T06:30:36+00:00] INFO: Processing directory[/etc/httpd/conf.d] action create (apache2::default line 137)
[2013-03-27T06:30:36+00:00] INFO: Processing directory[/var/cache/httpd] action create (apache2::default line 143)
[2013-03-27T06:30:36+00:00] INFO: directory[/var/cache/httpd] created directory /var/cache/httpd
[2013-03-27T06:30:36+00:00] INFO: directory[/var/cache/httpd] owner changed to 0
[2013-03-27T06:30:36+00:00] INFO: directory[/var/cache/httpd] group changed to 0
[2013-03-27T06:30:36+00:00] INFO: directory[/var/cache/httpd] mode changed to 755
[2013-03-27T06:30:36+00:00] INFO: Processing template[/etc/sysconfig/httpd] action create (apache2::default line 150)
[2013-03-27T06:30:36+00:00] INFO: template[/etc/sysconfig/httpd] backed up to /var/chef/backup/etc/sysconfig/httpd.chef-20130327063036
[2013-03-27T06:30:36+00:00] INFO: template[/etc/sysconfig/httpd] updated content
[2013-03-27T06:30:36+00:00] INFO: template[/etc/sysconfig/httpd] owner changed to 0
[2013-03-27T06:30:36+00:00] INFO: template[/etc/sysconfig/httpd] group changed to 0
[2013-03-27T06:30:36+00:00] INFO: template[/etc/sysconfig/httpd] mode changed to 644
[2013-03-27T06:30:36+00:00] INFO: template[/etc/sysconfig/httpd] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:36+00:00] INFO: Processing template[apache2.conf] action create (apache2::default line 159)
[2013-03-27T06:30:37+00:00] INFO: template[apache2.conf] backed up to /var/chef/backup/etc/httpd/conf/httpd.conf.chef-20130327063037
[2013-03-27T06:30:37+00:00] INFO: template[apache2.conf] updated content
[2013-03-27T06:30:37+00:00] INFO: template[apache2.conf] owner changed to 0
[2013-03-27T06:30:37+00:00] INFO: template[apache2.conf] group changed to 0
[2013-03-27T06:30:37+00:00] INFO: template[apache2.conf] mode changed to 644
[2013-03-27T06:30:37+00:00] INFO: template[apache2.conf] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:37+00:00] INFO: Processing template[apache2-conf-security] action create (apache2::default line 175)
[2013-03-27T06:30:37+00:00] INFO: template[apache2-conf-security] updated content
[2013-03-27T06:30:37+00:00] INFO: template[apache2-conf-security] owner changed to 0
[2013-03-27T06:30:37+00:00] INFO: template[apache2-conf-security] group changed to 0
[2013-03-27T06:30:37+00:00] INFO: template[apache2-conf-security] mode changed to 644
[2013-03-27T06:30:37+00:00] INFO: template[apache2-conf-security] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:37+00:00] INFO: Processing template[apache2-conf-charset] action create (apache2::default line 185)
[2013-03-27T06:30:37+00:00] INFO: template[apache2-conf-charset] updated content
[2013-03-27T06:30:37+00:00] INFO: template[apache2-conf-charset] owner changed to 0
[2013-03-27T06:30:37+00:00] INFO: template[apache2-conf-charset] group changed to 0
[2013-03-27T06:30:37+00:00] INFO: template[apache2-conf-charset] mode changed to 644
[2013-03-27T06:30:37+00:00] INFO: template[apache2-conf-charset] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:37+00:00] INFO: Processing template[/etc/httpd/ports.conf] action create (apache2::default line 195)
[2013-03-27T06:30:37+00:00] INFO: template[/etc/httpd/ports.conf] updated content
[2013-03-27T06:30:37+00:00] INFO: template[/etc/httpd/ports.conf] owner changed to 0
[2013-03-27T06:30:37+00:00] INFO: template[/etc/httpd/ports.conf] group changed to 0
[2013-03-27T06:30:37+00:00] INFO: template[/etc/httpd/ports.conf] mode changed to 644
[2013-03-27T06:30:37+00:00] INFO: template[/etc/httpd/ports.conf] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:37+00:00] INFO: Processing template[/etc/httpd/sites-available/default] action create (apache2::default line 204)
[2013-03-27T06:30:37+00:00] INFO: template[/etc/httpd/sites-available/default] updated content
[2013-03-27T06:30:37+00:00] INFO: template[/etc/httpd/sites-available/default] owner changed to 0
[2013-03-27T06:30:37+00:00] INFO: template[/etc/httpd/sites-available/default] group changed to 0
[2013-03-27T06:30:37+00:00] INFO: template[/etc/httpd/sites-available/default] mode changed to 644
[2013-03-27T06:30:37+00:00] INFO: template[/etc/httpd/sites-available/default] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:37+00:00] INFO: Processing template[/etc/httpd/mods-available/status.conf] action create (apache2::mod_status line 21)
[2013-03-27T06:30:37+00:00] INFO: template[/etc/httpd/mods-available/status.conf] updated content
[2013-03-27T06:30:37+00:00] INFO: template[/etc/httpd/mods-available/status.conf] mode changed to 644
[2013-03-27T06:30:37+00:00] INFO: template[/etc/httpd/mods-available/status.conf] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:37+00:00] INFO: Processing file[/etc/httpd/mods-available/status.load] action create (apache2::mod_status line 31)
[2013-03-27T06:30:37+00:00] INFO: entered create
[2013-03-27T06:30:37+00:00] INFO: file[/etc/httpd/mods-available/status.load] mode changed to 644
[2013-03-27T06:30:37+00:00] INFO: file[/etc/httpd/mods-available/status.load] created file /etc/httpd/mods-available/status.load
[2013-03-27T06:30:37+00:00] INFO: Processing execute[a2enmod status] action run (apache2::mod_status line 38)
[2013-03-27T06:30:37+00:00] INFO: execute[a2enmod status] ran successfully
[2013-03-27T06:30:37+00:00] INFO: execute[a2enmod status] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:37+00:00] INFO: Processing template[/etc/httpd/mods-available/alias.conf] action create (apache2::mod_alias line 21)
[2013-03-27T06:30:37+00:00] INFO: template[/etc/httpd/mods-available/alias.conf] updated content
[2013-03-27T06:30:37+00:00] INFO: template[/etc/httpd/mods-available/alias.conf] mode changed to 644
[2013-03-27T06:30:37+00:00] INFO: template[/etc/httpd/mods-available/alias.conf] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:37+00:00] INFO: Processing file[/etc/httpd/mods-available/alias.load] action create (apache2::mod_alias line 31)
[2013-03-27T06:30:38+00:00] INFO: entered create
[2013-03-27T06:30:38+00:00] INFO: file[/etc/httpd/mods-available/alias.load] mode changed to 644
[2013-03-27T06:30:38+00:00] INFO: file[/etc/httpd/mods-available/alias.load] created file /etc/httpd/mods-available/alias.load
[2013-03-27T06:30:38+00:00] INFO: Processing execute[a2enmod alias] action run (apache2::mod_alias line 38)
[2013-03-27T06:30:38+00:00] INFO: execute[a2enmod alias] ran successfully
[2013-03-27T06:30:38+00:00] INFO: execute[a2enmod alias] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:38+00:00] INFO: Processing file[/etc/httpd/mods-available/auth_basic.load] action create (apache2::mod_auth_basic line 31)
[2013-03-27T06:30:38+00:00] INFO: entered create
[2013-03-27T06:30:38+00:00] INFO: file[/etc/httpd/mods-available/auth_basic.load] mode changed to 644
[2013-03-27T06:30:38+00:00] INFO: file[/etc/httpd/mods-available/auth_basic.load] created file /etc/httpd/mods-available/auth_basic.load
[2013-03-27T06:30:38+00:00] INFO: Processing execute[a2enmod auth_basic] action run (apache2::mod_auth_basic line 38)
[2013-03-27T06:30:38+00:00] INFO: execute[a2enmod auth_basic] ran successfully
[2013-03-27T06:30:38+00:00] INFO: execute[a2enmod auth_basic] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:38+00:00] INFO: Processing file[/etc/httpd/mods-available/authn_file.load] action create (apache2::mod_authn_file line 31)
[2013-03-27T06:30:38+00:00] INFO: entered create
[2013-03-27T06:30:38+00:00] INFO: file[/etc/httpd/mods-available/authn_file.load] mode changed to 644
[2013-03-27T06:30:38+00:00] INFO: file[/etc/httpd/mods-available/authn_file.load] created file /etc/httpd/mods-available/authn_file.load
[2013-03-27T06:30:38+00:00] INFO: Processing execute[a2enmod authn_file] action run (apache2::mod_authn_file line 38)
[2013-03-27T06:30:38+00:00] INFO: execute[a2enmod authn_file] ran successfully
[2013-03-27T06:30:38+00:00] INFO: execute[a2enmod authn_file] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:38+00:00] INFO: Processing file[/etc/httpd/mods-available/authz_default.load] action create (apache2::mod_authz_default line 31)
[2013-03-27T06:30:38+00:00] INFO: entered create
[2013-03-27T06:30:38+00:00] INFO: file[/etc/httpd/mods-available/authz_default.load] mode changed to 644
[2013-03-27T06:30:38+00:00] INFO: file[/etc/httpd/mods-available/authz_default.load] created file /etc/httpd/mods-available/authz_default.load
[2013-03-27T06:30:38+00:00] INFO: Processing execute[a2enmod authz_default] action run (apache2::mod_authz_default line 38)
[2013-03-27T06:30:38+00:00] INFO: execute[a2enmod authz_default] ran successfully
[2013-03-27T06:30:38+00:00] INFO: execute[a2enmod authz_default] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:38+00:00] INFO: Processing file[/etc/httpd/mods-available/authz_groupfile.load] action create (apache2::mod_authz_groupfile line 31)
[2013-03-27T06:30:38+00:00] INFO: entered create
[2013-03-27T06:30:38+00:00] INFO: file[/etc/httpd/mods-available/authz_groupfile.load] mode changed to 644
[2013-03-27T06:30:38+00:00] INFO: file[/etc/httpd/mods-available/authz_groupfile.load] created file /etc/httpd/mods-available/authz_groupfile.load
[2013-03-27T06:30:38+00:00] INFO: Processing execute[a2enmod authz_groupfile] action run (apache2::mod_authz_groupfile line 38)
[2013-03-27T06:30:38+00:00] INFO: execute[a2enmod authz_groupfile] ran successfully
[2013-03-27T06:30:38+00:00] INFO: execute[a2enmod authz_groupfile] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:38+00:00] INFO: Processing file[/etc/httpd/mods-available/authz_host.load] action create (apache2::mod_authz_host line 31)
[2013-03-27T06:30:38+00:00] INFO: entered create
[2013-03-27T06:30:38+00:00] INFO: file[/etc/httpd/mods-available/authz_host.load] mode changed to 644
[2013-03-27T06:30:38+00:00] INFO: file[/etc/httpd/mods-available/authz_host.load] created file /etc/httpd/mods-available/authz_host.load
[2013-03-27T06:30:38+00:00] INFO: Processing execute[a2enmod authz_host] action run (apache2::mod_authz_host line 38)
[2013-03-27T06:30:38+00:00] INFO: execute[a2enmod authz_host] ran successfully
[2013-03-27T06:30:38+00:00] INFO: execute[a2enmod authz_host] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:38+00:00] INFO: Processing file[/etc/httpd/mods-available/authz_user.load] action create (apache2::mod_authz_user line 31)
[2013-03-27T06:30:38+00:00] INFO: entered create
[2013-03-27T06:30:38+00:00] INFO: file[/etc/httpd/mods-available/authz_user.load] mode changed to 644
[2013-03-27T06:30:38+00:00] INFO: file[/etc/httpd/mods-available/authz_user.load] created file /etc/httpd/mods-available/authz_user.load
[2013-03-27T06:30:38+00:00] INFO: Processing execute[a2enmod authz_user] action run (apache2::mod_authz_user line 38)
[2013-03-27T06:30:38+00:00] INFO: execute[a2enmod authz_user] ran successfully
[2013-03-27T06:30:38+00:00] INFO: execute[a2enmod authz_user] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:38+00:00] INFO: Processing template[/etc/httpd/mods-available/autoindex.conf] action create (apache2::mod_autoindex line 21)
[2013-03-27T06:30:39+00:00] INFO: template[/etc/httpd/mods-available/autoindex.conf] updated content
[2013-03-27T06:30:39+00:00] INFO: template[/etc/httpd/mods-available/autoindex.conf] mode changed to 644
[2013-03-27T06:30:39+00:00] INFO: template[/etc/httpd/mods-available/autoindex.conf] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:39+00:00] INFO: Processing file[/etc/httpd/mods-available/autoindex.load] action create (apache2::mod_autoindex line 31)
[2013-03-27T06:30:39+00:00] INFO: entered create
[2013-03-27T06:30:39+00:00] INFO: file[/etc/httpd/mods-available/autoindex.load] mode changed to 644
[2013-03-27T06:30:39+00:00] INFO: file[/etc/httpd/mods-available/autoindex.load] created file /etc/httpd/mods-available/autoindex.load
[2013-03-27T06:30:39+00:00] INFO: Processing execute[a2enmod autoindex] action run (apache2::mod_autoindex line 38)
[2013-03-27T06:30:39+00:00] INFO: execute[a2enmod autoindex] ran successfully
[2013-03-27T06:30:39+00:00] INFO: execute[a2enmod autoindex] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:39+00:00] INFO: Processing template[/etc/httpd/mods-available/dir.conf] action create (apache2::mod_dir line 21)
[2013-03-27T06:30:39+00:00] INFO: template[/etc/httpd/mods-available/dir.conf] updated content
[2013-03-27T06:30:39+00:00] INFO: template[/etc/httpd/mods-available/dir.conf] mode changed to 644
[2013-03-27T06:30:39+00:00] INFO: template[/etc/httpd/mods-available/dir.conf] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:39+00:00] INFO: Processing file[/etc/httpd/mods-available/dir.load] action create (apache2::mod_dir line 31)
[2013-03-27T06:30:39+00:00] INFO: entered create
[2013-03-27T06:30:39+00:00] INFO: file[/etc/httpd/mods-available/dir.load] mode changed to 644
[2013-03-27T06:30:39+00:00] INFO: file[/etc/httpd/mods-available/dir.load] created file /etc/httpd/mods-available/dir.load
[2013-03-27T06:30:39+00:00] INFO: Processing execute[a2enmod dir] action run (apache2::mod_dir line 38)
[2013-03-27T06:30:39+00:00] INFO: execute[a2enmod dir] ran successfully
[2013-03-27T06:30:39+00:00] INFO: execute[a2enmod dir] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:39+00:00] INFO: Processing file[/etc/httpd/mods-available/env.load] action create (apache2::mod_env line 31)
[2013-03-27T06:30:39+00:00] INFO: entered create
[2013-03-27T06:30:39+00:00] INFO: file[/etc/httpd/mods-available/env.load] mode changed to 644
[2013-03-27T06:30:39+00:00] INFO: file[/etc/httpd/mods-available/env.load] created file /etc/httpd/mods-available/env.load
[2013-03-27T06:30:39+00:00] INFO: Processing execute[a2enmod env] action run (apache2::mod_env line 38)
[2013-03-27T06:30:39+00:00] INFO: execute[a2enmod env] ran successfully
[2013-03-27T06:30:39+00:00] INFO: execute[a2enmod env] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:39+00:00] INFO: Processing template[/etc/httpd/mods-available/mime.conf] action create (apache2::mod_mime line 21)
[2013-03-27T06:30:39+00:00] INFO: template[/etc/httpd/mods-available/mime.conf] updated content
[2013-03-27T06:30:39+00:00] INFO: template[/etc/httpd/mods-available/mime.conf] mode changed to 644
[2013-03-27T06:30:39+00:00] INFO: template[/etc/httpd/mods-available/mime.conf] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:39+00:00] INFO: Processing file[/etc/httpd/mods-available/mime.load] action create (apache2::mod_mime line 31)
[2013-03-27T06:30:39+00:00] INFO: entered create
[2013-03-27T06:30:39+00:00] INFO: file[/etc/httpd/mods-available/mime.load] mode changed to 644
[2013-03-27T06:30:39+00:00] INFO: file[/etc/httpd/mods-available/mime.load] created file /etc/httpd/mods-available/mime.load
[2013-03-27T06:30:39+00:00] INFO: Processing execute[a2enmod mime] action run (apache2::mod_mime line 38)
[2013-03-27T06:30:39+00:00] INFO: execute[a2enmod mime] ran successfully
[2013-03-27T06:30:39+00:00] INFO: execute[a2enmod mime] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:39+00:00] INFO: Processing template[/etc/httpd/mods-available/negotiation.conf] action create (apache2::mod_negotiation line 21)
[2013-03-27T06:30:39+00:00] INFO: template[/etc/httpd/mods-available/negotiation.conf] updated content
[2013-03-27T06:30:39+00:00] INFO: template[/etc/httpd/mods-available/negotiation.conf] mode changed to 644
[2013-03-27T06:30:39+00:00] INFO: template[/etc/httpd/mods-available/negotiation.conf] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:39+00:00] INFO: Processing file[/etc/httpd/mods-available/negotiation.load] action create (apache2::mod_negotiation line 31)
[2013-03-27T06:30:40+00:00] INFO: entered create
[2013-03-27T06:30:40+00:00] INFO: file[/etc/httpd/mods-available/negotiation.load] mode changed to 644
[2013-03-27T06:30:40+00:00] INFO: file[/etc/httpd/mods-available/negotiation.load] created file /etc/httpd/mods-available/negotiation.load
[2013-03-27T06:30:40+00:00] INFO: Processing execute[a2enmod negotiation] action run (apache2::mod_negotiation line 38)
[2013-03-27T06:30:40+00:00] INFO: execute[a2enmod negotiation] ran successfully
[2013-03-27T06:30:40+00:00] INFO: execute[a2enmod negotiation] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:40+00:00] INFO: Processing template[/etc/httpd/mods-available/setenvif.conf] action create (apache2::mod_setenvif line 21)
[2013-03-27T06:30:40+00:00] INFO: template[/etc/httpd/mods-available/setenvif.conf] updated content
[2013-03-27T06:30:40+00:00] INFO: template[/etc/httpd/mods-available/setenvif.conf] mode changed to 644
[2013-03-27T06:30:40+00:00] INFO: template[/etc/httpd/mods-available/setenvif.conf] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:40+00:00] INFO: Processing file[/etc/httpd/mods-available/setenvif.load] action create (apache2::mod_setenvif line 31)
[2013-03-27T06:30:40+00:00] INFO: entered create
[2013-03-27T06:30:40+00:00] INFO: file[/etc/httpd/mods-available/setenvif.load] mode changed to 644
[2013-03-27T06:30:40+00:00] INFO: file[/etc/httpd/mods-available/setenvif.load] created file /etc/httpd/mods-available/setenvif.load
[2013-03-27T06:30:40+00:00] INFO: Processing execute[a2enmod setenvif] action run (apache2::mod_setenvif line 38)
[2013-03-27T06:30:40+00:00] INFO: execute[a2enmod setenvif] ran successfully
[2013-03-27T06:30:40+00:00] INFO: execute[a2enmod setenvif] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:40+00:00] INFO: Processing file[/etc/httpd/mods-available/log_config.load] action create (apache2::mod_log_config line 31)
[2013-03-27T06:30:40+00:00] INFO: entered create
[2013-03-27T06:30:40+00:00] INFO: file[/etc/httpd/mods-available/log_config.load] mode changed to 644
[2013-03-27T06:30:40+00:00] INFO: file[/etc/httpd/mods-available/log_config.load] created file /etc/httpd/mods-available/log_config.load
[2013-03-27T06:30:40+00:00] INFO: Processing execute[a2enmod log_config] action run (apache2::mod_log_config line 38)
[2013-03-27T06:30:40+00:00] INFO: execute[a2enmod log_config] ran successfully
[2013-03-27T06:30:40+00:00] INFO: execute[a2enmod log_config] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:40+00:00] INFO: Processing file[/etc/httpd/mods-available/logio.load] action create (apache2::mod_logio line 31)
[2013-03-27T06:30:40+00:00] INFO: entered create
[2013-03-27T06:30:40+00:00] INFO: file[/etc/httpd/mods-available/logio.load] mode changed to 644
[2013-03-27T06:30:40+00:00] INFO: file[/etc/httpd/mods-available/logio.load] created file /etc/httpd/mods-available/logio.load
[2013-03-27T06:30:40+00:00] INFO: Processing execute[a2enmod logio] action run (apache2::mod_logio line 38)
[2013-03-27T06:30:40+00:00] INFO: execute[a2enmod logio] ran successfully
[2013-03-27T06:30:40+00:00] INFO: execute[a2enmod logio] not queuing delayed action restart on service[apache2] (delayed), as it's already been queued
[2013-03-27T06:30:40+00:00] INFO: Processing execute[a2dissite default] action run (apache2::default line 34)
[2013-03-27T06:30:40+00:00] INFO: Processing service[apache2] action start (apache2::default line 221)
[2013-03-27T06:30:40+00:00] INFO: service[apache2] started
[2013-03-27T06:30:40+00:00] INFO: template[/etc/httpd/mods-available/deflate.conf] sending restart action to service[apache2] (delayed)
[2013-03-27T06:30:40+00:00] INFO: Processing service[apache2] action restart (apache2::default line 221)
[2013-03-27T06:30:41+00:00] INFO: service[apache2] restarted
[2013-03-27T06:30:41+00:00] INFO: execute[a2enmod deflate] sending restart action to service[apache2] (delayed)
[2013-03-27T06:30:41+00:00] INFO: Processing service[apache2] action restart (apache2::default line 24)
[2013-03-27T06:30:43+00:00] INFO: service[apache2] restarted
[2013-03-27T06:30:43+00:00] INFO: Chef Run complete in 59.309557362 seconds
[2013-03-27T06:30:43+00:00] INFO: Running report handlers
[2013-03-27T06:30:43+00:00] INFO: Report handlers complete
</code></pre>

<p>You can also verify that Apache was installed correctly by visiting the
host-only private network address for the virtual machine that Berkshelf
created in your Vagrantfile:</p>

<p><a href="http://33.33.33.10">http://33.33.33.10</a></p>

<p>While you will get a <code>404 Not Found</code> error because we haven&#8217;t added any
content to our web site yet, the important part is that <code>Apache Server
at 33.33.33.10 Port 80</code> sent the response:</p>

<p><img src="/images/apachewebserver.png" alt="Apache Server Response" /></p>

<p>Wait a second, though.  You never downloaded the <code>apache2</code> cookbook!
That&#8217;s the magic of the Berkshelf Vagrant plugin you installed earlier.  The
Berkshelf Vagrant plugin will make sure that any changes you make to your
cookbook and all of your cookbook&#8217;s dependencies are made available to your
virtual machine.  Berkshelf automatically loads all your cookbook dependencies
much like Bundler automatically loads all your gem dependencies.</p>

<p>Where does the Berkshelf put the cookbooks it downloads?  You can find them
in <code>~/.berkshelf/cookbooks</code></p>

<pre><code>Users/misheska/.berkshelf/cookbooks
└── apache2-1.6.0
    ├── attributes
    ├── definitions
    ├── files
    │   └── default
    │       └── tests
    │           └── minitest
    │               └── support
    ├── recipes
    └── templates
        └── default
            └── mods
</code></pre>

<p><code>~/.berkshelf</code> is just the default location where Berkshelf stores data
on your local disk.  This location can be altered by setting the environment
variable <code>BERKSHELF_PATH</code>.</p>

<h1>More to come!</h1>

<p>This is just part one of a multi-part series.  So far you&#8217;ve gone through
severl short iteration loops as you evolve the myface cookbook.  In subsequent
installments, we&#8217;ll go through more iterations, resulting in the final
end product: <a href="https://github.com/reset/myface-cookbook">https://github.com/reset/myface-cookbook</a></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Mischa Taylor</span></span>

      








  


<time datetime="2013-03-24T09:27:00-07:00" pubdate data-updated="true">Mar 24<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/chef/'>chef</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://misheska.com/blog/2013/03/24/getting-started-writing-chef-cookbooks-the-berkshelf-way/" data-via="" data-counturl="http://misheska.com/blog/2013/03/24/getting-started-writing-chef-cookbooks-the-berkshelf-way/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/03/10/using-pik-to-manage-multiple-versions-of-ruby-on-windows/" title="Previous Post: Using pik to manage multiple versions of Ruby on Windows">&laquo; Using pik to manage multiple versions of Ruby on Windows</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/03/24/getting-started-writing-chef-cookbooks-the-berkshelf-way/">Getting started writing Chef cookbooks the Berkshelf Way</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/10/using-pik-to-manage-multiple-versions-of-ruby-on-windows/">Using pik to manage multiple versions of Ruby on Windows</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/28/try-out-sensu-monitoring-using-virtual-box%2C-vagrant-and-chef/">Try out Sensu Monitoring using Virtual Box, Vagrant and Chef</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/24/using-rbenv-to-manage-multiple-versions-of-ruby/">Using Rbenv to manage multiple versions of Ruby</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/24/using-rvm-to-manage-multiple-versions-of-ruby/">Using RVM to manage multiple versions of Ruby</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/misheska">@misheska</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'misheska',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Mischa Taylor -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
